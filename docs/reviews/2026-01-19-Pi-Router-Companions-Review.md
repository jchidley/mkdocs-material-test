---
date: "2026-01-19"
title: "Review: Pi Router Companion Docs"
tags:
  - meta
  - review
llm_generated: true
---

# Review: Pi Router Companion Docs

!!! note "LLM Generated"
    This review was generated by Claude (Anthropic) for Jack's consideration.

**Documents under review:**

1. `Linux/2020-01-07-Traffic-Manager-Not-Firewall.md`
2. `Linux/2020-01-08-DNS-Setup-For-DIY-Home-Router.md`

**Relationship:** Both are companions to `Pi/2020-01-05-Building-A-Raspberry-Pi-Home-Router.md`

---

## Document 1: Traffic Manager Not Firewall

**Type:** How-to with explanation

**Overall:** Good security philosophy intro followed by practical nftables config. The "why" section is valuable and authentically yours.

### What Works Well

- Strong opinionated intro about security philosophy
- Complete nftables ruleset with Martian packet filtering
- Useful iptables-to-nftables translation tip
- Good links section

### Suggested Improvements

| Change | Effort | Value | Recommendation |
|--------|--------|-------|----------------|
| Add tags + tested date | Low | Medium | ✓ Recommend |
| Add prerequisites (link to Pi Router) | Low | High | ✓ Recommend |
| Add expected output after `nft list ruleset` | Low | Medium | ✓ Recommend |
| Update interface names to match Pi Router | Low | High | ✓ Recommend |
| Note: config uses `eth0`/`eth1` but Pi Router uses `wan0`/`ethusb0` | - | - | Needs clarification |

### Interface Name Difference

This doc uses `eth0`/`eth1`, while Pi Router uses `wan0`/`ethusb0`. This is fine — readers are expected to understand their own interface names.

---

## Document 2: DNS Setup For DIY Home Router

**Type:** How-to guide

**Overall:** Comprehensive BIND + DHCP dynamic DNS setup. Good testing section. Complex topic handled well.

### What Works Well

- Clear explanation of private domain options (.test, .home, etc.)
- Complete config files for BIND and DHCP integration
- Testing section with useful commands
- Root hints update script

### Suggested Improvements

| Change | Effort | Value | Recommendation |
|--------|--------|-------|----------------|
| Add tags + tested date | Low | Medium | ✓ Recommend |
| Add prerequisites section | Low | High | ✓ Recommend |
| Fix outdated URL (see verification) | Low | High | ✓ Recommend |
| Add expected outputs for test commands | Medium | Medium | Optional |
| Note IP range difference (10.1.x vs 10.2.x from Pi Router) | Low | Medium | ✓ Recommend |

### IP Range Difference

Pi Router uses `10.2.0.0/16`, DNS doc uses `10.1.0.0/16`. This is fine — different setups, readers expected to adapt.

---

## Code & Command Verification

### Traffic Manager

| Item | Testable? | Result | Notes |
|------|-----------|--------|-------|
| nftables syntax | ✓ With sudo | ❌ **BUG FOUND** | `meta if` is invalid, must be `iifname`/`oifname` |
| `iptables-save` command | ✓ Exists | ✓ Valid | Standard iptables tool |
| `iptables-restore-translate` | ✓ Exists | ⚠️ Check | May need `iptables-nft` package |

#### nftables Bug Details

The original config uses `meta if` which is not valid nftables syntax. Tested with `sudo nft -c -f`.

| Original (broken) | Fixed |
|-------------------|-------|
| `define wan = eth0` | `define wan = "eth0"` |
| `meta if $wan` | `iifname $wan` |
| `meta if $lan` | `iifname $lan` |
| `meta if lo` | `iifname "lo"` |
| `meta oif $wan` | `oifname $wan` |

Fixed config validated successfully with `sudo nft -c -f`.

### DNS Setup

| Item | Testable? | Result | Notes |
|------|-----------|--------|-------|
| `named-checkconf` | ✓ With bind9-utils | ✅ Valid | Syntax OK |
| `named-checkzone` chidley.test | ✓ With bind9-utils | ✅ Valid | Loaded serial 1 |
| `named-checkzone` 1.10.rev | ✓ With bind9-utils | ✅ Valid | Loaded serial 1 |
| root.hint URL | ✓ URL check | ✅ Valid | 200 OK |

### URL Verification

#### Traffic Manager Links

| URL | Status | Action |
|-----|--------|--------|
| wiki.nftables.org (all 4 links) | ✅ 200 | OK |
| en.wikipedia.org/wiki/Reserved_IP_addresses | ✅ 200 | OK |
| ronvalente.net/posts/alpine-firewall/ | ❌ Dead | **Remove or replace** |

#### DNS Setup Links

| URL | Status | Action |
|-----|--------|--------|
| ex-parrot.com upside-down-ternet | ✅ 301→200 | Update to https://pete.ex-parrot.com/upside-down-ternet.html |
| blog.bigdinosaur.org | ✅ 301→200 | OK (redirect works) |
| wiki.archlinux.org (all links) | ✅ 301→200 | OK (redirects to /title/ URLs) |
| tools.ietf.org/html/rfc2606 | ✅ 301→200 | OK |
| features.icann.org | ✅ 307→200 | OK |
| semicomplete.com | ✅ 200 | OK |
| kb.isc.org | ✅ 200 | OK |
| internic.net/domain/named.root | ✅ 200 | OK |

---

## Summary of Required Fixes

### Must Fix

1. **Traffic Manager:** Fix nftables syntax bug (`meta if` → `iifname`/`oifname`, quote interface names)
2. **Traffic Manager:** Remove dead link `ronvalente.net/posts/alpine-firewall/`
3. **DNS Setup:** Update upside-down-ternet URL to `https://pete.ex-parrot.com/upside-down-ternet.html`

### Recommended

4. Add frontmatter tags and `llm_assisted: true` to both
5. Add tested date info box to both
6. Add prerequisites linking back to Pi Router guide

---

## Proposed Changes

### Traffic Manager — Frontmatter & Header

```text
---
date: "2020-01-07"
title: "Traffic Manager Not Firewall"
tags:
  - linux
  - networking
  - security
  - nftables
  - firewall
llm_assisted: true
---

!!! info "Tested"
    Originally written January 2020 for Arch Linux. Part of the [Pi Router series](../Pi/2020-01-05-Building-A-Raspberry-Pi-Home-Router.md).
```

### DNS Setup — Frontmatter & Header

```text
---
date: "2020-01-08"
title: "DNS Setup For DIY Home Router"
tags:
  - linux
  - networking
  - dns
  - bind
  - dhcp
llm_assisted: true
---

!!! info "Tested"
    Originally written January 2020 for Arch Linux with BIND 9. Part of the [Pi Router series](../Pi/2020-01-05-Building-A-Raspberry-Pi-Home-Router.md).
```

---

## Next Steps

1. Jack approves/modifies suggestions
2. Apply frontmatter, info boxes, and link fixes
3. Mark both as complete in tracker

*This review: LLM generated (Claude, Anthropic)*
