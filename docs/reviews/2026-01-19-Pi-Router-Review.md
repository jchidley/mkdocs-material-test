---
date: "2026-01-19"
title: "Review: Building A Raspberry Pi Home Router"
tags:
  - meta
  - review
llm_generated: true
---

# Review: Building A Raspberry Pi Home Router

!!! note "LLM Generated"
    This review was generated by Claude (Anthropic) for Jack's consideration. No changes have been made to the original document.

**Document under review:** `Pi/2020-01-05-Building-A-Raspberry-Pi-Home-Router.md`

**Document type:** How-to guide (instructional)

**Overall assessment:** Strong bones — clear steps, good structure. A few improvements would make it easier to follow and troubleshoot.

---

## What Works Well

1. **Clear narrative flow** — Introduction explains the "why" before diving into "how"
2. **Real-world context** — Virgin Media ISP, family of 5, throughput requirements
3. **Good use of `cat > file << "EOF"`** — Reproducible config blocks
4. **Logical section progression** — Install → Network → Routing → Firewall → DHCP
5. **Links to related docs** — Connects to Traffic Manager and DNS setup guides

---

## Suggested Improvements

### 1. Add Prerequisites Section

**Why:** Reader needs to know what they need before starting.

**Suggestion:** Add after Introduction:

```markdown
## Prerequisites

- Raspberry Pi 4 (recommended) or Pi 3 B+ (minimum for ~100Mbps)
- SD card (2GB minimum, 8GB+ recommended)
- USB-to-Ethernet adapter (for second network interface)
- Another Linux machine to prepare the SD card
- Basic familiarity with Linux command line
```

### 2. Add Expected Outputs

**Why:** Readers can verify they're on track.

**Examples:**

After `ip addr`, show what success looks like:
```markdown
You should see both interfaces with addresses:
- `wan0` with a DHCP-assigned address from your ISP
- `ethusb0` with `10.2.0.1/16`
```

After `nft -s list ruleset`:
```markdown
You should see:
```
table ip nat_table {
    chain postrouting {
        type nat hook postrouting priority srcnat; policy accept;
        oifname "wan0" masquerade
    }
}
```
```

### 3. Clarify the MAC Address Placeholders

**Current:** `MACAddress=12:34:56:78:90:ab`

**Issue:** Not obvious this is a placeholder.

**Suggestion:** Add a note:
```markdown
!!! warning "Replace MAC addresses"
    Replace `12:34:56:78:90:ab` with your actual MAC addresses from `ip addr` output.
```

### 4. Add Troubleshooting Section

**Why:** Common issues when this doesn't work.

**Suggestion:**

```markdown
## Troubleshooting

**No internet on client device:**
- Check `ip addr` shows both interfaces up
- Verify `sysctl net.ipv4.ip_forward` returns `1`
- Check `nft list ruleset` shows the masquerade rule

**DHCP not assigning addresses:**
- Check `systemctl status dhcpd4@ethusb0.service` for errors
- Verify client is connected to the correct interface

**Can't reach router from client:**
- Ensure client has IP in `10.2.x.x` range
- Check cable/connection to USB ethernet adapter
```

### 5. Note the Date/Version Context

**Why:** Arch Linux changes; instructions may need updates.

**Suggestion:** Add to Introduction or Prerequisites:
```markdown
!!! info "Tested"
    Last tested: January 2020 on Raspberry Pi 4 with Arch Linux ARM.
    Commands may need adjustment for newer versions.
```

### 6. Minor: Split Introduction

**Current:** Introduction mixes "why I built this" (explanation) with "performance numbers" (reference).

**Options:**
- A) Keep as-is — the narrative is part of your voice
- B) Move performance numbers to a "Hardware Requirements" subsection

**Recommendation:** Keep as-is. The story adds context and is authentically yours.

---

## Summary of Proposed Changes

| Change | Effort | Value | Your Call |
|--------|--------|-------|-----------|
| Add Prerequisites | Low | High | Recommend |
| Add expected outputs | Medium | High | Recommend |
| Clarify MAC placeholders | Low | Medium | Recommend |
| Add Troubleshooting | Medium | High | Optional |
| Add tested date | Low | Medium | Recommend |
| Split Introduction | Low | Low | Skip — keep your voice |

---

## Code & Command Verification

What can be tested without the actual hardware setup:

| Command/Code | Testable? | Status | Notes |
|--------------|-----------|--------|-------|
| `mkfs.vfat`, `mkfs.ext4` | ⚠️ Destructive | Not tested | Requires SD card, would wipe data |
| `wget ...ArchLinuxARM-rpi-4-latest.tar.gz` | ✓ URL check | ❌ **Needs check** | Verify URL still valid |
| `bsdtar -xpf` | ✓ Syntax | ✓ Valid | Standard bsdtar usage |
| `pacman -S nftables dhcp usbutils` | ✓ Package names | ❌ **Needs check** | Verify packages exist in Arch ARM repos |
| systemd .link/.network file syntax | ✓ Syntax | ✓ Valid | Standard systemd-networkd format |
| nftables.conf syntax | ✓ Syntax | ❌ **Needs check** | Can validate with `nft -c -f` if nft installed |
| dhcpd.conf syntax | ✓ Syntax | ❌ **Needs check** | Can validate with `dhcpd -t` if dhcpd installed |
| systemd service file syntax | ✓ Syntax | ✓ Valid | Standard systemd format |

### Verification Actions Needed

1. **Check Arch Linux ARM URL is still valid:**
   ```bash
   curl -sI http://os.archlinuxarm.org/os/ArchLinuxARM-rpi-4-latest.tar.gz | head -1
   ```

2. **Verify package names** (if Arch system available):
   ```bash
   pacman -Ss ^nftables$ ^dhcp$ ^usbutils$
   ```

3. **Validate nftables syntax** (if nft installed):
   ```bash
   echo 'flush ruleset
   define wan_if = "wan0"
   table ip nat_table {
       chain postrouting {
           type nat hook postrouting priority 0; policy accept;
           oifname $wan_if masquerade
       }
   }' | nft -c -f -
   ```

### Verification Results

| Check | Result | Date | Notes |
|-------|--------|------|-------|
| Arch ARM URL | ✅ Valid | 2026-01-19 | HTTP 302 redirect (normal for mirror) |
| Package names | ⚠️ Skipped | 2026-01-19 | No Arch system available to verify |
| nftables syntax | ⚠️ Skipped | 2026-01-19 | `nft -c` requires root even for syntax check |
| dhcpd syntax | ⚠️ Skipped | 2026-01-19 | dhcpd not installed on test system |

**Conclusion:** URL confirmed valid. Syntax checks require either root access or target hardware. Manual verification recommended when following the guide.

---

## Next Steps

If you'd like to proceed with any of these changes:

1. Let me know which suggestions to apply
2. I'll draft the specific edits for your review
3. You approve/modify before any changes are made
4. Document gets `llm_assisted: true` tag added

*This review: LLM generated (Claude, Anthropic)*
